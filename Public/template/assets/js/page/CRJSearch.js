define(["jquery","utils","config","clientAPI","layer","pagination","remodal"],function(e,o,t,i){var n=e("[data-remodal-id=changeLineModal]").remodal(),s=e("body"),l={init:function(){this.render(),this.bindEvents()},render:function(){this.initModal(),this.initEventBind(),this.fnGetList({},!0)},bindEvents:function(){this.onSearch(),this.onStopTrade()},initEventBind:function(){o.initDatePicker()},initModal:function(){s.on("click",".J_showChangeLine",function(){var o=e(this),t=o.parents("tr").find("td"),i=t.eq(4).text(),s=t.eq(2).text(),l=t.eq(3).text(),p=e(".changeLineModal .modalForm");p.find("input[name=orgName]").val(i),p.find("input[name=nickname]").val(s),p.find("input[name=phone]").val(l),n.open()}),e(document).on("closed",".remodal",function(o){e(this).find(".modalForm")[0].reset()})},onSearch:function(){e(".pagination").show().html("").createPage({pageCount:10,current:1,backFn:function(e){console.log(e)}})},onStopTrade:function(){s.on("click",".J_showStopTrade",function(){var o=e(this),t=o.parents("tr").attr("data-id");o.parents("tr").find("td").eq(2).text();layer.confirm("警告！停止交易后用户能正常登录，但是无法进行交易",{},function(){i.stopTrade({id:t},function(e){layer.msg("操作成功")}),layer.msg("操作成功")})})},fnGetList:function(o,i){var n=this,s=e(".data-container table"),l={totalPages:91,pageNum:5,page:1,list:[{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"7418135986911958157",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003025",close_position_time:"1490003085",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.061104",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"1",handle:"0"}]};if(console.log("获取客户管理列表 调用成功!"),"0"==l.list.length)return s.find("tbody").empty().html("<tr><td colspan='7'>暂无记录</td></tr>"),e(".pagination").hide(),!1;var p,_='<td><input type="checkbox"></td>',d="<td><a class='text-blue' href='/clientManage/clientListView/buyLog?id=123'> 查看 </a> | <a class='J_showChangeLine text-blue' href='javascript:;'> 额度 </a> | <a class='J_showStopTrade text-blue' href='javascript:;'> 停止交易 </a></td>";if(e.each(l.list,function(e,o){var i="<td>"+o.code_id+"</td>",n="<td>"+o+"</td>",s="<td>"+o.phone+"</td>",l="<td>"+t.orgType[o.orgType]+"</td>",r="<td>"+t.upLevel[o.upLevel]+"</td>";p+='<tr class="fadeIn animated">'+_+i+n+s+l+r+d+"</tr>"}),s.find("tbody").empty().html(p),i){var r=l.totalPages;r>0&&(console.log("页数："+r),e(".pagination").show().html("").createPage({pageCount:r,current:1,backFn:function(e){var t=o;t.page=e,n.fnGetList(o)}}))}}};l.init()});