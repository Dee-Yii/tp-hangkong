define(["jquery","utils","config","accountAPI","layer","pagination","remodal"],function(e,o,n,t){var i=e("[data-remodal-id=addOrgModal]").remodal(),l=e("[data-remodal-id=changeOrgModal]").remodal(),s=e(".data-container table tbody input[type=checkbox]:checked"),c=e("body"),r={init:function(){this.render(),this.bindEvents()},render:function(){this.initModal(),this.fnGetList({},!0)},bindEvents:function(){this.onAdd(),this.onOpen(),this.onClose(),this.onDel(),this.onChange(),this.onSearch()},initModal:function(){e(".J_showAdd").on("click",function(){i.open()}),c.on("click",".J_showChangeOrg",function(){var o=e(this),n=o.parents("tr").find("td"),t=n.eq(1).text(),i=n.eq(2).text(),s=(n.eq(3).text(),n.eq(4).text(),n.eq(5).text()),c=n.eq(6).text(),r=e(".changeOrgModal .modalForm");r.find("input[name=orgId]").val(t),r.find("input[name=orgName]").val(i),r.find("input[name=orgLevel]").val(i),r.find("input[name=orgType]").val(i),r.find("input[name=phone]").val(s),r.find("input[name=cellphone]").val(c),l.open()}),e(document).on("closed",".remodal",function(o){e(this).find(".modalForm")[0].reset()})},onAdd:function(){var o=e(".addOrgModal .remodal-confirm");o.on("click",function(o){o.preventDefault();var n=e(this);if(!n.hasClass("disabled")){n.addClass("disabled");var l={};t.addOrg(l,function(e){console.log(e),i.close(),n.removeClass("disabled")})}})},onOpen:function(){e(".J_showOpen").on("click",function(){var i=o.getCheckedArr();i.length>0?layer.confirm("确定启用选中的列表项吗？",{icon:3},function(o){t.openOrg(i,function(o){s.each(function(){e(this).parents("tr").find("td").eq(7).text(n.orgStatus[1])})}),layer.close(o)}):layer.alert("请先选择要启用的列表项")})},onClose:function(){e(".J_showClose").on("click",function(){var i=o.getCheckedArr();i.length>0?layer.confirm("确定禁用选中的列表项吗？",{icon:3},function(o){t.closeOrg(i,function(o){s.each(function(){e(this).parents("tr").find("td").eq(7).text(n.orgStatus[2])})}),layer.close(o)}):layer.alert("请先选择要禁用的列表项")})},onDel:function(){e(".J_showDel").on("click",function(){var n=o.getCheckedArr();n.length>0?layer.confirm("确定删除选中的列表项吗？",{icon:3},function(o){t.delOrg(n,function(o){s.each(function(){e(this).parents("tr").remove()})}),layer.close(o)}):layer.alert("请先选择要删除的列表项",{icon:0})})},onChange:function(){e(".changeOrgModal .remodal-confirm").on("click",function(){var e={};t.changeOrg(e,function(e){layer.msg("修改成功")})})},onSearch:function(){var o=this;e(".J_search").on("click",function(){var n=(e("input[name=type]").val(),e("input[name=level]").val(),e("input[name=phone]").val()||"",e("input[name=orgName]").val()||"",{});o.fnGetList(n,!0)})},onSelectAll:function(){o.selectAll()},fnGetList:function(o,t){var i=this,l=e(".data-container table"),s={totalPages:91,pageNum:5,page:1,list:[{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"141474220113067346",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003017",close_position_time:"1490003077",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.06111",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"-1",handle:"0"},{tid:"7418135986911958157",uid:"5",code_id:"12",buy_sell:"-1",code:null,symbol:"fx_sjpycnh",name:"上海-东京1分钟",close_type:"6",amount:"3",open_position_time:"1490003025",close_position_time:"1490003085",gross_profit:"33.4023",open_price:"0.06111",open_cost:"33.4023",open_charge:"0.15",close_price:"0.061104",pos_limit:"0",stop:"0",deferred:"0",is_deferred:null,result:"1",handle:"0"}]};if(console.log("获取机构管理列表 调用成功!"),"0"==s.list.length)return l.find("tbody").empty().html("<tr><td colspan='9'>暂无记录</td></tr>"),e(".pagination").hide(),!1;var c,r='<td><input type="checkbox"></td>',d="<td><a class='J_showChangeOrg text-blue' href='javascript:;'>修改</a></td>";if(e.each(s.list,function(e,o){var t="<td>"+o.code_id+"</td>",i="<td>"+o+"</td>",l="<td>"+n.orgType[o.orgType]+"</td>",s="<td>"+n.upLevel[o.upLevel]+"</td>",p="<td>"+o.phone+"</td>",_="<td>"+o.cellphone+"</td>",a="<td>"+n.orgStatus[o.orgStatus]+"</td>";c+='<tr class="fadeIn animated">'+r+t+i+l+s+p+_+a+d+"</tr>"}),l.find("tbody").empty().html(c),t){var p=s.totalPages;p>0&&(console.log("页数："+p),e(".pagination").show().html("").createPage({pageCount:p,current:1,backFn:function(e){var n=o;n.page=e,i.fnGetList(o)}}))}}};r.init()});